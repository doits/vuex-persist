!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lodash.merge")):"function"==typeof define&&define.amd?define(["exports","lodash.merge"],e):e(t.VuexPersistence={},t._.merge)}(this,function(t,r){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;var s=(e.prototype.enqueue=function(t){return this._queue.push(t),this._flushing?Promise.resolve():this.flushQueue()},e.prototype.flushQueue=function(){var e=this;this._flushing=!0;var r=function(){var t=e._queue.shift();if(t)return t.then(r);e._flushing=!1};return Promise.resolve(r())},e);function e(){this._queue=[],this._flushing=!1}function i(t,e){return r({},t,e)}function u(t){var u=this;this._mutex=new s,this.subscriber=function(e){return function(t){return e.subscribe(t)}},void 0===t&&(t={}),this.key=null!=t.key?t.key:"vuex",this.subscribed=!1,this.supportCircular=t.supportCircular||!1,this.supportCircular&&(n=require("flatted")),this.storage=t.storage||window.localStorage,this.reducer=null!=t.reducer?t.reducer:null==t.modules?function(t){return t}:function(s){return t.modules.reduce(function(t,e){var r;return i(t,((r={})[e]=s[e],r))},{})},this.filter=t.filter||function(t){return!0},this.strictMode=t.strictMode||!1,this.RESTORE_MUTATION=function(t,e){for(var r=i(t,e||{}),s=0,u=Object.keys(r);s<u.length;s++){var n=u[s];this._vm.$set(t,n,r[n])}},this.asyncStorage=t.asyncStorage||!1;var e=this.storage&&this.storage.constructor&&this.storage.constructor.name&&this.storage.constructor.name.toLowerCase();this.asyncStorage=this.asyncStorage||"localforage"===e,this.asyncStorage?(this.restoreState=null!=t.restoreState?t.restoreState:function(t,e){return e.getItem(t).then(function(t){return"string"==typeof t?u.supportCircular?n.parse(t||"{}"):JSON.parse(t||"{}"):t||{}})},this.saveState=null!=t.saveState?t.saveState:function(t,e,r){var s=r&&r.constructor&&r.constructor.name&&"localforage"===r.constructor.name.toLowerCase();return r.setItem(t,s?i({},e||{}):u.supportCircular?n.stringify(e):JSON.stringify(e))},this.plugin=function(e){e.restored=u.restoreState(u.key,u.storage).then(function(t){u.strictMode?e.commit("RESTORE_MUTATION",t):e.replaceState(i(e.state,t||{})),u.subscriber(e)(function(t,e){u.filter(t)&&u._mutex.enqueue(u.saveState(u.key,u.reducer(e),u.storage))}),u.subscribed=!0})}):(this.restoreState=null!=t.restoreState?t.restoreState:function(t,e){var r=e.getItem(t);return"string"==typeof r?u.supportCircular?n.parse(r||"{}"):JSON.parse(r||"{}"):r||{}},this.saveState=null!=t.saveState?t.saveState:function(t,e,r){return r.setItem(t,u.supportCircular?n.stringify(e):JSON.stringify(e))},this.plugin=function(t){var e=u.restoreState(u.key,u.storage);u.strictMode?t.commit("RESTORE_MUTATION",e):t.replaceState(i(t.state,e||{})),u.subscriber(t)(function(t,e){u.filter(t)&&u.saveState(u.key,u.reducer(e),u.storage)}),u.subscribed=!0})}var n=JSON;t.VuexPersistence=u,t.default=u,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map
